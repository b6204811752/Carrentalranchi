const debounce=(e,t)=>{let n;return function(...o){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...o)},t)}},throttle=(e,t)=>{let n;return function(...o){n||(e.apply(this,o),n=!0,setTimeout(()=>n=!1,t))}},navToggle=document.getElementById("navToggle"),navMenu=document.getElementById("navMenu"),navLinks=document.querySelectorAll(".nav-link"),header=document.getElementById("header");navToggle&&navMenu&&(navToggle.addEventListener("click",()=>{const e=navMenu.classList.toggle("active");navToggle.classList.toggle("active"),navToggle.setAttribute("aria-expanded",e),document.body.style.overflow=e?"hidden":""}),navToggle.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),navToggle.click())})),document.addEventListener("click",e=>{navMenu&&navToggle&&(navMenu.contains(e.target)||navToggle.contains(e.target)||(navMenu.classList.remove("active"),navToggle.classList.remove("active"),navToggle.setAttribute("aria-expanded","false"),document.body.style.overflow=""))}),navLinks.forEach(e=>{e.addEventListener("click",()=>{navMenu&&navMenu.classList.remove("active"),navToggle&&(navToggle.classList.remove("active"),navToggle.setAttribute("aria-expanded","false")),document.body.style.overflow="",navLinks.forEach(e=>e.classList.remove("active")),e.classList.add("active")})});const handleScroll=throttle(()=>{header&&(window.scrollY>100?header.classList.add("scrolled"):header.classList.remove("scrolled"))},100);window.addEventListener("scroll",handleScroll,{passive:!0}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if("#"!==t&&document.querySelector(t)){e.preventDefault();const n=80,o=document.querySelector(t).getBoundingClientRect().top+window.pageYOffset-n;window.scrollTo({top:o,behavior:"smooth"})}})});const tripTypeSelect=document.getElementById("tripType"),returnDateGroup=document.getElementById("returnDateGroup"),returnDateInput=document.getElementById("returnDate"),dropLocationInput=document.getElementById("dropLocation"),dropLocationGroup=dropLocationInput?dropLocationInput.closest(".form-group"):null;tripTypeSelect&&tripTypeSelect.addEventListener("change",function(){const e=this.value;"roundtrip"===e?(returnDateGroup&&(returnDateGroup.style.display="block",returnDateInput.required=!0),dropLocationGroup&&(dropLocationGroup.style.display="block",dropLocationInput.required=!0)):"local"===e?(returnDateGroup&&(returnDateGroup.style.display="none",returnDateInput.required=!1),dropLocationGroup&&(dropLocationGroup.style.display="none",dropLocationInput.required=!1),dropLocationInput&&(dropLocationInput.placeholder="Local area (within city)")):(returnDateGroup&&(returnDateGroup.style.display="none",returnDateInput.required=!1),dropLocationGroup&&(dropLocationGroup.style.display="block",dropLocationInput.required=!0),dropLocationInput&&(dropLocationInput.placeholder="Enter drop location"))}),document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("bookingForm");if(e){let t=document.getElementById("hidden_iframe");t||(t=document.createElement("iframe"),t.name="hidden_iframe",t.id="hidden_iframe",t.style.display="none",document.body.appendChild(t));let n=null,o=!1;e.addEventListener("submit",a=>{if(a.preventDefault(),a.stopPropagation(),o)return!1;const r=document.getElementById("tripType").value,l=document.getElementById("pickupLocation").value,i=document.getElementById("dropLocation").value,s=document.getElementById("pickupDate").value,c=document.getElementById("pickupTime").value,d=document.getElementById("carType").value,u=document.getElementById("mobileNumber").value,m=document.getElementById("returnDate")?document.getElementById("returnDate").value:"",p=document.getElementById("tripType").options[document.getElementById("tripType").selectedIndex].text,y=document.getElementById("carType").options[document.getElementById("carType").selectedIndex].text;if(!u.match(/^[0-9]{10}$/))return void alert("❌ Please enter a valid 10-digit mobile number");if(!(r&&l&&s&&c&&d))return void alert("❌ Please fill all required fields");const g=e.querySelector('button[type="submit"]'),v=g.innerHTML;g.innerHTML='<i class="fas fa-spinner fa-spin"></i> Submitting...',g.disabled=!0,o=!0;const h=document.createElement("form");h.action="https://docs.google.com/forms/d/e/1FAIpQLSdUoXyun_N1BYtlAD2HZyGX2tLtTO0LIaayOEqWq3GgqoCAnQ/formResponse",h.method="POST",h.target="hidden_iframe",h.style.display="none";[{name:"entry.219265158",value:{oneway:"One Way Trip",roundtrip:"Round Trip",local:"Local Rental(hours)",airport:"Airport Transfer"}[r]||p},{name:"entry.1594636824",value:s},{name:"entry.1069431231",value:l},{name:"entry.1297259824",value:i},{name:"entry.2064504236",value:c},{name:"entry.1057979598",value:u},{name:"entry.681528332",value:{sedan:"Sedan",ertiga:"MUV",innova:"SUV",luxury:"Luxury"}[d]||d}].forEach(e=>{const t=document.createElement("input");t.type="hidden",t.name=e.name,t.value=e.value,h.appendChild(t)}),document.body.appendChild(h),t.onload=function(){if(o){clearTimeout(n),alert("✅ SUCCESS!\n\nYour booking has been submitted successfully!\nWe will contact you soon on: "+u),g.innerHTML='<i class="fas fa-check-circle"></i> Booking Submitted!',g.style.backgroundColor="#28a745";const t=document.getElementById("bookingSuccessMessage");t&&(t.style.display="block",t.scrollIntoView({behavior:"smooth",block:"nearest"}));let a="NEW BOOKING\n\n";a+=`Trip: ${p}\n`,a+=`From: ${l}\n`,"local"!==r&&(a+=`To: ${i}\n`),a+=`Date: ${s} at ${c}\n`,"roundtrip"===r&&m&&(a+=`Return: ${m}\n`),a+=`Vehicle: ${y}\n`,a+=`Mobile: ${u}\n\n`,a+="Please confirm availability.",setTimeout(()=>{if(confirm("Would you like to send a confirmation message via WhatsApp?\n\n(This will help us process your booking faster)")){const e=`https://wa.me/${"917488341848"}?text=${encodeURIComponent(a)}`;window.open(e,"_blank")}setTimeout(()=>{e.reset(),g.innerHTML=v,g.style.backgroundColor="",g.disabled=!1,o=!1,t&&(t.style.display="none"),h.parentNode&&h.parentNode.removeChild(h)},2e3)},1e3)}},n=setTimeout(()=>{o&&(alert("❌ SUBMISSION FAILED!\n\nThere was a problem submitting your booking.\n\nPlease try again or contact us directly via WhatsApp."),g.innerHTML='<i class="fas fa-exclamation-triangle"></i> Failed - Try Again',g.style.backgroundColor="#dc3545",setTimeout(()=>{g.innerHTML=v,g.style.backgroundColor="",g.disabled=!1,o=!1,h.parentNode&&h.parentNode.removeChild(h)},3e3))},1e4);try{h.submit()}catch(e){console.error("Form submission error:",e),clearTimeout(n),alert("❌ SUBMISSION ERROR!\n\nThere was a problem submitting your booking.\n\nPlease try again or contact us directly via WhatsApp."),g.innerHTML='<i class="fas fa-exclamation-triangle"></i> Error - Try Again',g.style.backgroundColor="#dc3545",setTimeout(()=>{g.innerHTML=v,g.style.backgroundColor="",g.disabled=!1,o=!1,h.parentNode&&h.parentNode.removeChild(h)},3e3)}return!1})}});const contactForm=document.getElementById("contactForm");contactForm&&contactForm.addEventListener("submit",e=>{e.preventDefault();const t=new FormData(contactForm),n=t.get("name"),o=t.get("phone"),a=t.get("email"),r=t.get("service"),l=t.get("message");alert("Thank you for contacting us! We will get back to you soon.");encodeURIComponent(`Name: ${n}\nPhone: ${o}\nEmail: ${a}\nService: ${r}\nMessage: ${l}`);contactForm.reset()});const counters=document.querySelectorAll(".stat-number"),speed=200,animateCounters=()=>{counters.forEach(e=>{const t=+e.getAttribute("data-target"),n=+e.innerText,o=t/200;n<t?(e.innerText=Math.ceil(n+o),setTimeout(()=>animateCounters(),1)):e.innerText=t.toLocaleString()})},observerOptions={threshold:.1,rootMargin:"0px"},observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(animateCounters(),observer.unobserve(e.target))})},observerOptions),statsSection=document.querySelector(".stats-section");statsSection&&observer.observe(statsSection);const faqItems=document.querySelectorAll(".faq-item");faqItems.forEach(e=>{e.querySelector(".faq-question").addEventListener("click",()=>{faqItems.forEach(t=>{t!==e&&t.classList.remove("active")}),e.classList.toggle("active")})});const scrollTopBtn=document.getElementById("scrollTop");if(scrollTopBtn){const e=throttle(()=>{window.pageYOffset>300?scrollTopBtn.classList.add("show"):scrollTopBtn.classList.remove("show")},100);window.addEventListener("scroll",e,{passive:!0}),e(),scrollTopBtn.addEventListener("click",e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})},!1),scrollTopBtn.addEventListener("click",function(e){"scrollBehavior"in document.documentElement.style||(e.preventDefault(),window.scroll(0,0))},!1)}else console.error("Scroll button not found!");const lazyLoadImages=()=>{const e=document.querySelectorAll('img[loading="lazy"]');if("loading"in HTMLImageElement.prototype)e.forEach(e=>{e.dataset.src&&(e.src=e.dataset.src)});else{const t=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target;n.dataset.src&&(n.src=n.dataset.src,n.removeAttribute("data-src")),t.unobserve(n)}})},{rootMargin:"50px 0px",threshold:.01});e.forEach(e=>{e.dataset.src&&t.observe(e)})}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",lazyLoadImages):lazyLoadImages();const updateYear=()=>{const e=document.querySelectorAll(".current-year"),t=(new Date).getFullYear();e.forEach(e=>{e.textContent=t})};updateYear();const validatePhone=e=>/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/.test(e),validateEmail=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),phoneInputs=document.querySelectorAll('input[type="tel"]');phoneInputs.forEach(e=>{e.addEventListener("blur",function(){this.value&&!validatePhone(this.value)?(this.style.borderColor="var(--danger-color)",this.setCustomValidity("Please enter a valid phone number")):(this.style.borderColor="var(--success-color)",this.setCustomValidity(""))}),e.addEventListener("input",function(){this.style.borderColor="#e0e0e0"})});const emailInputs=document.querySelectorAll('input[type="email"]');emailInputs.forEach(e=>{e.addEventListener("blur",function(){this.value&&!validateEmail(this.value)?(this.style.borderColor="var(--danger-color)",this.setCustomValidity("Please enter a valid email address")):(this.style.borderColor="var(--success-color)",this.setCustomValidity(""))}),e.addEventListener("input",function(){this.style.borderColor="#e0e0e0"})});const dateInputs=document.querySelectorAll('input[type="date"]');dateInputs.forEach(e=>{if(!e.value){const t=new Date,n=String(t.getDate()).padStart(2,"0"),o=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear();e.value=`${a}-${o}-${n}`,e.min=`${a}-${o}-${n}`}});const callButtons=document.querySelectorAll('a[href^="tel:"]');callButtons.forEach(e=>{e.addEventListener("click",()=>{})});const whatsappButtons=document.querySelectorAll('a[href*="wa.me"]');whatsappButtons.forEach(e=>{e.addEventListener("click",()=>{})});let currentTestimonial=0;const testimonials=document.querySelectorAll(".testimonial-card"),rotateTestimonials=()=>{testimonials.length>0&&(testimonials.forEach(e=>{e.style.display="none"}),testimonials[currentTestimonial].style.display="block",currentTestimonial=(currentTestimonial+1)%testimonials.length)};window.addEventListener("load",()=>{document.body.classList.add("loaded");const e=()=>{document.querySelectorAll(".service-card, .fleet-card, .why-card, .testimonial-card").forEach(e=>{const t=e.getBoundingClientRect().top,n=e.getBoundingClientRect().bottom;t<window.innerHeight&&n>0&&(e.style.opacity="1",e.style.transform="translateY(0)")})};e(),window.addEventListener("scroll",e)});const calculatePrice=(e,t)=>{const n=e*({hatchback:9,sedan:10,suv:12,innova:15}[t]||10),o=e>250?300:0;return{basePrice:n,driverAllowance:o,totalPrice:n+o}},saveCustomerInfo=e=>{localStorage.setItem("customerInfo",JSON.stringify(e))},loadCustomerInfo=()=>{const e=localStorage.getItem("customerInfo");return e?JSON.parse(e):null},autoFillForms=()=>{const e=loadCustomerInfo();if(e){const t=document.querySelectorAll('input[type="text"][placeholder*="Name"]'),n=document.querySelectorAll('input[type="tel"]'),o=document.querySelectorAll('input[type="email"]');t.forEach(t=>{!t.value&&e.name&&(t.value=e.name)}),n.forEach(t=>{!t.value&&e.phone&&(t.value=e.phone)}),o.forEach(t=>{!t.value&&e.email&&(t.value=e.email)})}};setTimeout(autoFillForms,500);const calcBtn=document.getElementById("calcBtn"),fareResult=document.getElementById("fareResult"),fareAmount=document.getElementById("fareAmount"),fareDetails=document.getElementById("fareDetails");if(calcBtn){calcBtn.addEventListener("click",function(){const e=document.getElementById("calcKm"),t=document.getElementById("calcCar").value;if(!e||!e.value)return alert("⚠️ Please enter distance in kilometers"),void e.focus();const n=parseFloat(e.value);if(n<=0)return alert("⚠️ Please enter a valid distance (greater than 0 km)"),void e.focus();if(n>1e3)return alert("⚠️ Maximum distance is 1000 km. For longer trips, please contact us directly."),void e.focus();const o=parseFloat(t),a=n*o,r=document.getElementById("calcCar"),l=r.options[r.selectedIndex].text;fareAmount.textContent=`₹${Math.round(a).toLocaleString()}`,fareDetails&&(fareDetails.innerHTML=`\n                <strong>Calculation:</strong> ${n} km × ₹${o}/km = ₹${Math.round(a).toLocaleString()}<br>\n                <strong>Vehicle:</strong> ${l}\n            `),fareResult.style.display="block",fareResult.scrollIntoView({behavior:"smooth",block:"nearest"})});const t=document.getElementById("calcKm");t&&t.addEventListener("keypress",function(e){"Enter"===e.key&&calcBtn.click()})}const liveBookings=document.getElementById("liveBookings");if(liveBookings){function updateBookingCount(){const e=Math.floor(18*Math.random())+18;liveBookings.style.opacity="0",setTimeout(()=>{liveBookings.textContent=e,liveBookings.style.opacity="1"},300)}setInterval(updateBookingCount,3e4)}const printPage=()=>{window.print()},shareWebsite=async()=>{if(navigator.share)try{await navigator.share({title:"Car Rental Ranchi",text:"Best taxi service in Ranchi - Affordable car rentals for local and outstation trips",url:window.location.href})}catch(e){}else navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!")};function updateScrollProgress(){if(!document.querySelector(".scroll-progress")){const e=document.createElement("div");e.className="scroll-progress",document.body.appendChild(e)}const e=(document.documentElement.scrollTop||document.body.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100,t=document.querySelector(".scroll-progress");t&&(t.style.width=e+"%")}function revealOnScroll(){document.querySelectorAll(".fade-in, .slide-in-left, .slide-in-right").forEach(e=>{const t=e.getBoundingClientRect().top,n=e.getBoundingClientRect().bottom;t<window.innerHeight-100&&n>0&&e.classList.add("visible")})}function initLightbox(){if(!document.querySelector(".lightbox")){const e=document.createElement("div");e.className="lightbox",e.innerHTML='\n            <span class="lightbox-close">&times;</span>\n            <img class="lightbox-content" src="" alt="Lightbox image">\n        ',document.body.appendChild(e),e.addEventListener("click",t=>{(t.target.classList.contains("lightbox")||t.target.classList.contains("lightbox-close"))&&(e.classList.remove("active"),document.body.style.overflow="")}),document.addEventListener("keydown",t=>{"Escape"===t.key&&(e.classList.remove("active"),document.body.style.overflow="")})}document.querySelectorAll(".gallery-item img, .place-image").forEach(e=>{e.style.cursor="pointer",e.addEventListener("click",()=>{const t=document.querySelector(".lightbox"),n=document.querySelector(".lightbox-content");n.src=e.src,n.alt=e.alt||"Gallery image",t.classList.add("active"),document.body.style.overflow="hidden"})})}function calculateReadingTime(){const e=document.querySelector(".city-hero-content, article, main");if(e){const t=200,n=e.textContent.trim().split(/\s+/).length,o=Math.ceil(n/t),a=document.querySelector(".reading-time");a&&(a.textContent=`${o} min read`)}}function shareOnSocial(e){const t=encodeURIComponent(window.location.href),n=encodeURIComponent(document.title);let o="";switch(e){case"facebook":o=`https://www.facebook.com/sharer/sharer.php?u=${t}`;break;case"twitter":o=`https://twitter.com/intent/tweet?url=${t}&text=${n}`;break;case"linkedin":o=`https://www.linkedin.com/shareArticle?mini=true&url=${t}&title=${n}`;break;case"whatsapp":o=`https://wa.me/?text=${n}%20${t}`}o&&window.open(o,"_blank","width=600,height=400")}function copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>{showToast("Copied to clipboard!")}).catch(e=>{console.error("Failed to copy:",e)})}function showToast(e,t=3e3){const n=document.querySelector(".toast-notification");n&&n.remove();const o=document.createElement("div");o.className="toast-notification",o.textContent=e,o.style.cssText="\n        position: fixed;\n        bottom: 30px;\n        left: 50%;\n        transform: translateX(-50%);\n        background: #333;\n        color: white;\n        padding: 15px 30px;\n        border-radius: 8px;\n        box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n        z-index: 10000;\n        animation: slideUp 0.3s ease;\n    ",document.body.appendChild(o),setTimeout(()=>{o.style.animation="slideDown 0.3s ease",setTimeout(()=>o.remove(),300)},t)}window.addEventListener("load",()=>{window.performance.timing.domContentLoadedEventEnd,window.performance.timing.navigationStart}),window.addEventListener("online",()=>{}),window.addEventListener("offline",()=>{alert("You are currently offline. Some features may not work properly.")}),document.addEventListener("DOMContentLoaded",()=>{}),window.addEventListener("scroll",updateScrollProgress),window.addEventListener("scroll",revealOnScroll),window.addEventListener("load",revealOnScroll),window.addEventListener("load",initLightbox),window.addEventListener("load",calculateReadingTime);const style=document.createElement("style");function parallaxEffect(){const e=document.querySelector(".city-hero, .hero");if(e){const t=window.pageYOffset;e.style.backgroundPositionY=.5*t+"px"}}function detectDevice(){const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t=/iPad|Android/i.test(navigator.userAgent)&&window.innerWidth>=768;document.body.classList.add(e?"is-mobile":"is-desktop"),t&&document.body.classList.add("is-tablet")}style.textContent="\n    @keyframes slideUp {\n        from {\n            transform: translateX(-50%) translateY(100px);\n            opacity: 0;\n        }\n        to {\n            transform: translateX(-50%) translateY(0);\n            opacity: 1;\n        }\n    }\n    \n    @keyframes slideDown {\n        from {\n            transform: translateX(-50%) translateY(0);\n            opacity: 1;\n        }\n        to {\n            transform: translateX(-50%) translateY(100px);\n            opacity: 0;\n        }\n    }\n",document.head.appendChild(style),window.addEventListener("scroll",parallaxEffect),window.addEventListener("load",detectDevice);