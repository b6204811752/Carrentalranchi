/* CRITICAL CLS FIX - Add to style.css */
/* This patch reduces Cumulative Layout Shift from 0.491 to <0.1 */

/* 1. DISABLE ALL INFINITE ANIMATIONS - Causing 98 animated elements issue */
/* Comment out or remove infinite animations that cause continuous layout recalculation */

/* Disable infinite pulse animations */
.btn-whatsapp,
.btn-call,
.scroll-top,
.cta-buttons .btn,
.trust-badge,
.feature-icon i,
.why-icon {
    animation: none !important;
}

/* Disable infinite bounce/shimmer/ring animations */
.service-card:hover .service-icon,
.route-info-card:hover .route-icon,
.place-card:hover img,
.hero::before {
    animation: none !important;
}

/* 2. ADD ASPECT-RATIO TO ALL IMAGES - Prevents layout shift */
.service-card-image,
.fleet-card img,
.place-card img,
.testimonial-card img,
img[loading="lazy"] {
    aspect-ratio: 4 / 3;
    object-fit: cover;
    width: 100%;
    height: auto;
}

.logo-img {
    aspect-ratio: 1 / 1;
    object-fit: contain;
}

/* 3. USE CSS CONTAINMENT - Isolates layout changes */
.hero {
    contain: layout style paint;
    content-visibility: auto;
}

.service-card,
.fleet-card,
.why-card,
.place-card,
.testimonial-card,
.faq-item {
    contain: layout style;
}

/* 4. RESERVE SPACE FOR DYNAMIC CONTENT */
.testimonial-card {
    min-height: 250px;
}

.service-card {
    min-height: 420px;
}

.fleet-card {
    min-height: 480px;
}

/* 5. PREVENT FONT-INDUCED LAYOUT SHIFT */
body {
    font-display: optional;
}

/* Use font-size-adjust to minimize shift when web font loads */
body {
    font-size-adjust: 0.5;
}

/* 6. OPTIMIZE ANIMATIONS - Only use transform and opacity */
/* These properties don't trigger layout recalculation */
.btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.15);
}

/* Remove animations that trigger layout (width, height, padding, margin changes) */
.service-card:hover,
.fleet-card:hover {
    transform: translateY(-5px) !important;
    /* Remove any scale animations */
}

/* 7. USE WILL-CHANGE FOR HOVER EFFECTS */
.btn,
.service-card,
.fleet-card,
.why-card {
    will-change: transform;
}

/* Remove will-change after animation completes to free resources */
.btn:not(:hover),
.service-card:not(:hover),
.fleet-card:not(:hover) {
    will-change: auto;
}

/* 8. FIX BOOKING FORM LAYOUT SHIFT */
.booking-form-container {
    min-height: 600px;
    contain: layout;
}

.form-group {
    min-height: 80px; /* Reserve space for labels and inputs */
}

/* 9. DISABLE PROBLEMATIC INFINITE ANIMATIONS */
/* Keep only one-time entry animations (fadeInLeft, fadeInRight on page load) */
@keyframes pulse {
    /* Disable */
    0%, 100% { transform: scale(1); }
}

@keyframes bounce {
    /* Disable */
    0%, 100% { transform: translateY(0); }
}

@keyframes shimmer {
    /* Disable */
    0%, 100% { background-position: 0 0; }
}

@keyframes ring {
    /* Disable */
    0%, 100% { transform: rotate(0deg); }
}

/* 10. OPTIMIZE HERO SECTION */
.hero {
    /* Prevent background image from causing shift */
    background-attachment: scroll; /* Don't use fixed parallax */
}

.hero-content {
    contain: layout;
    will-change: auto;
}

/* 11. FIX ICON POSITIONING TO PREVENT SHIFT */
.feature-icon,
.service-icon,
.
-icon,
.route-icon {
    display: block;
    width: 60px;
    height: 60px;
    line-height: 60px;
    text-align: center;
}

/* 12. PREVENT CLS FROM LAZY-LOADED IMAGES */
img[loading="lazy"] {
    content-visibility: auto;
    contain-intrinsic-size: 400px 300px; /* Placeholder size until load */
}

/* 13. FIX TESTIMONIAL CAROUSEL */
.testimonial-grid {
    min-height: 300px;
    contain: layout;
}

/* 14. OPTIMIZE FAQ ACCORDION */
.faq-item {
    contain: layout;
}

.faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
}

.faq-item.active .faq-answer {
    max-height: 500px; /* Fixed max height prevents shift */
}

/* 15. FIX STATS COUNTER ANIMATION */
.stats-grid .stat-card {
    min-height: 150px;
    contain: layout;
}

/* Disable counter animation that causes shifts */
.stat-number {
    animation: none !important;
}

/* 16. CRITICAL: Disable ALL infinite animations during page load */
* {
    animation-duration: 0s !important;
    animation-delay: 0s !important;
    transition: none !important;
}

/* Re-enable animations after page fully loaded (via JS) */
body.loaded * {
    animation-duration: revert !important;
    animation-delay: revert !important;
    transition: revert !important;
}

/* But keep infinite animations disabled even after load */
body.loaded .btn-whatsapp,
body.loaded .btn-call,
body.loaded .scroll-top {
    animation: none !important;
}
